<div class="container mx-auto p-6">
  <div class="bg-white rounded-xl shadow-md overflow-hidden">
    <div class="p-6 border-b border-gray-200 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
      <div>
        <h2 class="text-3xl font-bold text-gray-800">Reservas</h2>
        <p class="text-gray-500 mt-1">Administra todas las estancias de tus huéspedes.</p>
      </div>
      <button pButton type="button" label="Nueva Reserva" icon="pi pi-plus" [routerLink]="['/bookings/new']" class="p-button-primary"></button>
    </div>

    <div class="overflow-x-auto">
      <p-table [value]="bookingsForTable" stripedRows>
        <ng-template pTemplate="header">
          <tr>
            <th class="p-5 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider">Huésped</th>
            <th class="p-5 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider">Estancia</th>
            <th class="p-5 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider">Monto Total</th>
            <th class="p-5 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider">Estado</th>
            <th class="p-5 text-center text-sm font-semibold text-gray-600 uppercase tracking-wider">Acciones</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-booking>
          <tr class="hover:bg-blue-50/50 transition-colors duration-150">
            <td class="p-5">
              <div class="flex items-center">
                <div class="w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center mr-4">
                  <span class="text-lg font-bold text-gray-600">{{ booking.guestName | slice:0:1 }}</span>
                </div>
                <div>
                  <p class="font-semibold text-gray-900">{{ booking.guestName }}</p>
                  <p class="text-sm text-gray-500">Hab. {{ booking.roomNumber }}</p>
                </div>
              </div>
            </td>
            <td class="p-5">
              <div class="flex flex-col">
                <div class="flex items-center text-gray-700">
                  <i class="pi pi-calendar-plus mr-2 text-green-500 text-lg"></i>
                  <span class="font-medium">{{ booking.checkInDate | date:'mediumDate' }}</span>
                </div>
                <div class="flex items-center text-gray-700 mt-1">
                  <i class="pi pi-calendar-minus mr-2 text-red-500 text-lg"></i>
                  <span class="font-medium">{{ booking.checkOutDate | date:'mediumDate' }}</span>
                </div>
              </div>
            </td>
            <td class="p-5 font-bold text-lg text-gray-800">
              {{ booking.totalPrice | currency:'COP':'symbol':'1.0-0' }}
            </td>
            <td class="p-5">
              <p-tag [value]="booking.status" [severity]="getSeverity(booking.status)" rounded="true"></p-tag>
            </td>
            <td class="p-5 text-center">
              <div class="flex gap-2 justify-center">
                <button pButton pTooltip="Editar Reserva" tooltipPosition="top" icon="pi pi-pencil" class="p-button-text p-button-rounded p-button-secondary text-lg" [routerLink]="['/bookings/edit', booking.id]"></button>
                <button pButton pTooltip="Cancelar Reserva" tooltipPosition="top" icon="pi pi-trash" class="p-button-text p-button-rounded p-button-danger text-lg" (click)="confirmCancel(booking)" *ngIf="booking.status !== 'Cancelada'"></button>
              </div>
            </td>
          </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
          <tr>
            <td colspan="5" class="text-center p-12">
              <i class="pi pi-calendar-times text-6xl text-gray-300"></i>
              <p class="mt-4 text-xl font-semibold text-gray-700">No se encontraron reservas</p>
              <p class="text-gray-500">Crea una nueva reserva para empezar a administrar.</p>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</div>